// Code generated by client-gen; DO NOT EDIT.

package wdk

import (
	"context"
	"github.com/filecoin-project/go-jsonrpc"
)

type WalletStorageWriterClient struct {
	client *rpcWalletStorageWriter
}

func (c *WalletStorageWriterClient) Migrate(storageName string, storageIdentityKey string) (string, error) {
	return c.client.Migrate(storageName, storageIdentityKey)
}

func (c *WalletStorageWriterClient) MakeAvailable() (*TableSettings, error) {
	return c.client.MakeAvailable()
}

func (c *WalletStorageWriterClient) FindOrInsertUser(identityKey string) (*TableUser, error) {
	return c.client.FindOrInsertUser(identityKey)
}

func (c *WalletStorageWriterClient) CreateAction(auth AuthID, args ValidCreateActionArgs) (*StorageCreateActionResult, error) {
	return c.client.CreateAction(auth, args)
}

type rpcWalletStorageWriter struct {
	Migrate func(string, string) (string, error)

	MakeAvailable func() (*TableSettings, error)

	FindOrInsertUser func(string) (*TableUser, error)

	CreateAction func(AuthID, ValidCreateActionArgs) (*StorageCreateActionResult, error)
}

func NewClient(addr string, overrideOptions ...StorageClientOverrides) (*WalletStorageWriterClient, func(), error) {
	opts := defaultClientOptions()
	client := &WalletStorageWriterClient{
		client: &rpcWalletStorageWriter{},
	}

	for _, opt := range overrideOptions {
		opt(&opts)
	}

	cleanup, err := jsonrpc.NewMergeClient(
		context.Background(),
		addr,
		"remote_storage",
		[]any{client.client},
		nil,
		opts.options...,
	)

	return client, cleanup, err
}
